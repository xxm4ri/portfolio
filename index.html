<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Portf칩lio Obby</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        canvas { display: block; }
        
        #ui-container {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
        }

        /* Modal de Vit칩ria / Habilidades */
        #win-screen {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(150, 100, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: white;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            z-index: 10;
        }

        #win-screen.show { transform: translate(-50%, -50%) scale(1); }
        
        .skill-badge {
            font-size: 3em;
            font-weight: bold;
            background: #fff;
            color: #8a2be2;
            padding: 10px 30px;
            border-radius: 50px;
            display: inline-block;
            margin-top: 20px;
        }

        .projects {
            margin-top: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .project-card {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 10px;
            border: 1px solid white;
        }
    </style>
</head>
<body>

    <div id="ui-container">
        <h1>Parkour Portfolio</h1>
        <p>Use WASD para mover e ESPA칂O para pular!</p>
    </div>

    <div id="win-screen">
        <h2>游끥 VOC칅 CHEGOU AO TOPO!</h2>
        <p>Minha principal habilidade 칠:</p>
        <div class="skill-badge">JAVA</div>
        
        <div class="projects">
            <div class="project-card">游늷 Sistema de Gest칚o</div>
            <div class="project-card">游늷 API Rest Spring Boot</div>
        </div>
        <button onclick="location.reload()" style="margin-top:20px; padding:10px; cursor:pointer;">Jogar Novamente</button>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "cannon-es": "https://cdn.jsdelivr.net/npm/cannon-es@0.20.0/+esm"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import * as CANNON from 'cannon-es';

        // --- CONFIGURA칂츾O B츼SICA ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x2a004a); // Fundo Roxo Escuro
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // --- LUZES ---
        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 10, 5);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040, 2));

        // --- F칈SICA ---
        const world = new CANNON.World({ gravity: new CANNON.Vec3(0, -9.82, 0) });
        
        // --- JOGADOR (A Esfera) ---
        const playerGeo = new THREE.SphereGeometry(0.5);
        const playerMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
        const playerMesh = new THREE.Mesh(playerGeo, playerMat);
        scene.add(playerMesh);

        const playerBody = new CANNON.Body({
            mass: 1,
            shape: new CANNON.Sphere(0.5),
            position: new CANNON.Vec3(0, 5, 0)
        });
        world.addBody(playerBody);

        // --- CRIA칂츾O DO PARKOUR (PLATAFORMAS) ---
        function createPlatform(x, y, z, color = 0xbf77f6) {
            const size = { w: 3, h: 0.5, d: 3 };
            const mesh = new THREE.Mesh(
                new THREE.BoxGeometry(size.w, size.h, size.d),
                new THREE.MeshStandardMaterial({ color: color })
            );
            mesh.position.set(x, y, z);
            scene.add(mesh);

            const body = new CANNON.Body({
                shape: new CANNON.Box(new CANNON.Vec3(size.w/2, size.h/2, size.d/2)),
                type: CANNON.Body.STATIC
            });
            body.position.set(x, y, z);
            world.addBody(body);
            return mesh;
        }

        // Montando o caminho
        createPlatform(0, 0, 0);       // In칤cio
        createPlatform(5, 2, -5);      // Pulo 1
        createPlatform(0, 4, -10);     // Pulo 2
        createPlatform(-5, 6, -15);    // Pulo 3
        const finalPlatform = createPlatform(0, 8, -22, 0xffd700); // Final Dourado

        // --- CONTROLES ---
        const keys = {};
        window.addEventListener('keydown', (e) => keys[e.code] = true);
        window.addEventListener('keyup', (e) => keys[e.code] = false);

        // --- LOOP DE ANIMA칂츾O ---
        function animate() {
            requestAnimationFrame(animate);
            world.fixedStep();

            // Sincronizar F칤sica com Visual
            playerMesh.position.copy(playerBody.position);
            
            // Movimenta칞칚o
            const force = 5;
            if (keys['KeyW']) playerBody.velocity.z = -force;
            if (keys['KeyS']) playerBody.velocity.z = force;
            if (keys['KeyA']) playerBody.velocity.x = -force;
            if (keys['KeyD']) playerBody.velocity.x = force;
            if (keys['Space'] && Math.abs(playerBody.velocity.y) < 0.01) playerBody.velocity.y = 5;

            // C칙mera segue o jogador
            camera.position.set(playerMesh.position.x, playerMesh.position.y + 5, playerMesh.position.z + 10);
            camera.lookAt(playerMesh.position);

            // Verifica칞칚o de Vit칩ria
            if (playerMesh.position.y > 7.5 && Math.abs(playerMesh.position.z + 22) < 2) {
                document.getElementById('win-screen').classList.add('show');
            }

            // Reset se cair
            if (playerMesh.position.y < -10) {
                playerBody.position.set(0, 5, 0);
                playerBody.velocity.set(0,0,0);
            }

            renderer.render(scene, camera);
        }

        animate();

        // Ajuste de tela
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
